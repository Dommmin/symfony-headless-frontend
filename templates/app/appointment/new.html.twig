{% extends 'base.html.twig' %}

{% block title %}Book New Appointment{% endblock %}

{% block body %}
    <div class="max-w-2xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">Book New Appointment</h1>

        {{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}
            <div class="form-control">
                {{ form_label(form.therapist, 'Therapist', {'label_attr': {'class': 'label'}}) }}
                {{ form_widget(form.therapist, {'attr': {'class': 'select select-bordered w-full'}}) }}
                {{ form_errors(form.therapist) }}
            </div>

            <div class="form-control">
                {{ form_label(form.date, 'Date', {'label_attr': {'class': 'label'}}) }}
                {{ form_widget(form.date, {'attr': {'class': 'input input-bordered w-full'}}) }}
                {{ form_errors(form.date) }}
            </div>

            <div class="form-control">
                {{ form_label(form.startTime, 'Start Time', {'label_attr': {'class': 'label'}}) }}
                {{ form_widget(form.startTime, {'attr': {'class': 'select select-bordered w-full'}}) }}
                {{ form_errors(form.startTime) }}
            </div>

            <div class="form-control">
                {{ form_label(form.notes, 'Notes', {'label_attr': {'class': 'label'}}) }}
                {{ form_widget(form.notes, {'attr': {'class': 'textarea textarea-bordered w-full', 'rows': 4}}) }}
                {{ form_errors(form.notes) }}
            </div>

            <div class="flex justify-end gap-4">
                <a href="{{ path('app_appointment_index') }}" class="btn btn-ghost">Cancel</a>
                <button type="submit" class="btn btn-primary">Book Appointment</button>
            </div>
        {{ form_end(form) }}
    </div>
{% endblock %}

{% block javascripts %}
<script>
document.getElementById('date').addEventListener('change', function() {
    window.location.href = '{{ path('app_appointment_new', {therapist: therapist.id}) }}?date=' + this.value;
});
</script>
{% endblock %} 